<html>
<head>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.js"></script>
  <script type="text/javascript" src="./jquery.at_intervals.js"></script>
</head>
<body>
  <h1>Observe the Firebug Console</h1>
  <a href="#" id="remove_from_dom">Remove from DOM (stops the intervals)</a>
  <a href="#" id="toggle_visibility">Toggle visibility (pauses/resumes the intervals)</a>
  <a href="#" id="pause_resume">Pause/Resume</a>
  <a href="#" id="stop">Stop</a>
  <a href="#" id="swap_fn">Swap function</a>
  <script type="text/javascript">
    $("#remove_from_dom").click(function(){
      $("#tagsoup1").empty()
      return false
    });

    $("#toggle_visibility").click(function(){
      $("#tagsoup1").toggle()
      return false
    });

    $("#pause_resume").toggle(function(){
      $("#widget").data("foo").should_pause = true
      return false
    }, function() {
      $("#widget").data("foo").should_pause = false
      return false
    });

    $("#stop").click(function(){
      $("#widget").data("foo").should_stop = true
      return false
    });
    
    $("#swap_fn").click(function(){
      $("#widget").data("foo").fn = function(){
        console.log("Swapped!!!")
      }
      return false
    })
  </script>


  <div id="tagsoup1">
    <div id="tagsoup2">

      <div id="widget">
        <p>Widget with setIntervals. Self-contained piece of code and looks.</p>
        <div id="logic" style="background-color: red; width: 66px; height: 66px"></div>

        <script type="text/javascript">
          $("#widget").at_intervals(function(){
            console.log("working...")
            $("#logic").toggle(200)
          }, { name: "foo", delay: 1000 });
        </script>
      </div>

    </div>
  </div>

</body>
</html>
